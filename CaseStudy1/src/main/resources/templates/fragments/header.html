<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>
<header>
    <div class="header-left">
        <div class="logo">
            <img src="/images/Oreo-Logo.png" alt="Logo" />
            <p class="title" th:text="#{company}">Công ty cổ phần ABC</p>
        </div>
    </div>
    <div class="header-right">
        <ul class="header-list">
            <li class ="header-list-text" th:text="#{homepage.sub1}">Chúng tôi làm gì</li>
            <li class ="header-list-text" th:text="#{homepage.sub2}">Chúng tôi là ai</li>
            <li class ="header-list-text" th:text="#{homepage.sub3}">Liên hệ</li>
        </ul>
    </div>

    <div style="display: flex; flex-direction: column">
<!--        <a class="nav-link" th:href="@{/login(lang='vi')}">Tiếng Việt</a>-->
<!--        <a class="nav-link" th:href="@{/login(lang='en')}">Tiếng Anh</a>-->
<!--        <a class="nav-link" th:href="@{/login(lang='jp')}">Tiếng Nhật</a>-->
        <select id="locales">
            <option value="" disabled selected>Chọn ngôn ngữ</option>
            <option value="en">Tiếng Anh</option>
            <option value="vi">Tiếng Việt</option>
            <option value="jp">Tiếng Nhật</option>
        </select>
    </div>

<!--    <div class="language-selector">-->
<!--        <a class="nav-link" th:href="@{/login(lang='vi')}">Tiếng Việt</a>-->
<!--        <a class="nav-link" th:href="@{/login(lang='en')}">English</a>-->
<!--    </div>-->
</header>

<script type="text/javascript">
    window.onload = function() {
        console.log("Window đã tải xong.");

        const savedLang = localStorage.getItem('language');
        console.log("Saved Language from localStorage: " + savedLang); // Kiểm tra giá trị

        if (savedLang) {
            setLanguage(savedLang, false);
        } else {
            setLanguage('vi', false);
        }

        document.getElementById('locales').addEventListener('change', function () {
            const selectedLang = this.value;
            console.log("Selected Language: " + selectedLang);
            if (selectedLang) {
                localStorage.setItem('language', selectedLang);
                setLanguage(selectedLang, true);
            }
        });
    };

    function setLanguage(lang, reload) {
        console.log("Setting language to: " + lang);
        if (reload) {
            window.location.href = window.location.pathname + '?lang=' + lang;
        }
    }

</script>
<script src="/js/language-selector.js"></script>

</body>
</html>